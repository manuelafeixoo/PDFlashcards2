<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flashcards Year 2</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<style>
:root {
    /* Cambiado de azul a morado */
    --primary: #6200ea; 
    --secondary: #00e5ff;
    --header-bg: #f3e5f5;
    --bg-gradient: linear-gradient(135deg, #f3e5f5 0%, #ce93d8 100%);
    --color-img-mode: #ff9800;
    --color-word-mode: #6200ea; 
    --color-exam-mode: #90ee90;
    
    --color-success: #00c853; 
    --color-error: #ff1744;
}

body {
    margin: 0; font-family: "Segoe UI", Tahoma, sans-serif;
    background: var(--bg-gradient); min-height: 100vh;
    padding: 10px; display: flex;
    flex-direction: column; align-items: center;
}

.app {
    width: 100%; max-width: 500px;
    background: rgba(255, 255, 255, 0.98); border-radius: 40px;
    box-shadow: 0 25px 50px rgba(0,0,0,0.15); overflow: hidden;
    display: flex; flex-direction: column;
}

header { 
    background: var(--header-bg);
    color: #333; padding: 12px; 
    text-align: center; display: flex; justify-content: center; 
    align-items: center; gap: 8px; font-weight: 900; 
    font-size: 1.6rem; 
    white-space: nowrap;
}

img[src*="camera"], img[src*="english"] {
    background: white !important;
    border-radius: 50% !important;
    padding: 2px !important;
    object-fit: contain;
}

header img { width: 35px; height: 35px; }

.exam-bar { 
    background: #424242; color: white;
    padding: 10px 20px;
    display: none; justify-content: space-between; align-items: center;
    font-size: 0.9rem; font-weight: bold;
}

.progress-container { width: 100%; height: 8px;
    background: #f5f5f5;
}
.progress-bar { width: 0%; height: 100%; background: var(--secondary); transition: width 0.4s; }

.mode-selector { display: flex; padding: 10px;
    gap: 8px;
    background: #fff; border-bottom: 1px solid #eee; }
.mode-btn { 
    flex: 1; padding: 10px;
    border: 2px solid #eee;
    border-radius: 15px; 
    background: #fafafa; color: #757575; font-weight: 800; cursor: pointer; 
    display: flex; align-items: center; justify-content: center;
    gap: 5px;
    transition: all 0.3s; font-size: 0.75rem;
}
.mode-btn img { width: 22px; height: 22px; }

.mode-btn.active.img-en { background: var(--color-img-mode); color: white; border-color: #f57c00; }
.mode-btn.active.en-img { background: var(--color-word-mode); color: white; border-color: #1976d2; }
.mode-btn.exam.active { background: var(--color-exam-mode); color: #2e7d32; border-color: #81c784; }

.controls-top { padding: 15px; text-align: center; }
select { 
    padding: 10px; border-radius: 20px; border: 2px solid var(--primary);
    font-weight: 800; width: 95%;
    cursor: pointer; color: var(--primary); background: #f3e5f5;
}

.mix-panel { 
    display: none; background: #fffde7; padding: 15px;
    margin: 0 15px 15px 15px; border-radius: 20px; text-align: left; 
    max-height: 180px; overflow-y: auto; font-size: 0.85rem;
    border: 2px dashed #fdd835;
}

.scene { width: 100%; height: 350px; perspective: 1000px; display: flex; justify-content: center; align-items: center; }
.card { width: 290px; height: 280px; position: relative; transition: transform 0.6s; transform-style: preserve-3d; cursor: pointer; }
.card.is-flipped { transform: rotateY(180deg); }

.card-face { 
    position: absolute; width: 100%; height: 100%; backface-visibility: hidden; 
    border-radius: 35px; display: flex; flex-direction: column;
    align-items: center; 
    justify-content: center; padding: 25px; box-sizing: border-box; border: 8px solid #fff;
    box-shadow: 0 15px 35px rgba(0,0,0,0.1);
}

/* Aplicado el borde de 4px morado claro y la sombra suave */
.face-img { 
    background: #ffffff; 
    border: 4px solid #b388ff !important; 
    box-shadow: 0 10px 25px rgba(179, 136, 255, 0.3) !important;
} 

.face-word { background: var(--primary); color: white; }
.card-face.back { transform: rotateY(180deg); }

.main-img { width: 100%; height: 160px; display: flex; align-items: center; justify-content: center; font-size: 8rem; background: transparent; }
.main-img img { max-width: 95%; max-height: 95%; object-fit: contain; background: transparent; }

.main-text { font-size: 2.2rem; font-weight: 900; text-transform: uppercase; text-align: center; color: inherit; }

.exam-actions { display: none; gap: 20px; margin-top: 20px; }
.action-btn { border: none; border-radius: 50%; width: 65px; height: 65px; color: white; font-size: 2rem; cursor: pointer; }

.nav-controls { display: flex; justify-content: space-between; align-items: center; padding: 15px 35px; background: #fff; border-top: 1px solid #eee; }
.nav-btn { background: var(--primary); color: white; border: none; width: 50px; height: 50px; border-radius: 50%; font-size: 1.5rem; cursor: pointer; }
.counter { font-weight: 800; color: var(--primary); font-size: 1rem; }
</style>
</head>
<body>

<div class="app">
    <div class="exam-bar" id="examBar">
        <span>‚è±Ô∏è <span id="timer">00:00</span></span>
        <span>üî• <span id="streak">0</span></span>
        <span>‚úÖ <span id="scoreCorrect">0</span> | ‚ùå <span id="scoreWrong">0</span></span>
    </div>
    <div class="progress-container"><div id="progressBar" class="progress-bar"></div></div>

    <header>
        <img src="english.png"> PICTURE DICTIONARY 2 <img src="english.png">
    </header>

    <div class="mode-selector">
        <button id="btnImgEn" class="mode-btn active img-en" onclick="setMode('IMG-EN')">
            <img src="camera.png"> ‚ûî <img src="english.png">
        </button>
        <button id="btnEnImg" class="mode-btn en-img" onclick="setMode('EN-IMG')">
            <img src="english.png"> ‚ûî <img src="camera.png">
        </button>
        <button id="btnExam" class="mode-btn exam" onclick="toggleExamMode()">üéì EXAM</button>
    </div>

    <div class="controls-top">
        <select id="categorySelect" onchange="handleCategoryChange()">
            <option value="ALL">üåü All Topics</option>
            <option value="MIXED">üß© Mixed Topics</option>
        </select>
    </div>

    <div id="mixPanel" class="mix-panel">
        <strong>Pick topics to mix:</strong><hr>
        <div id="mixCheckboxes"></div>
        <button style="width:100%; margin-top:10px; background:var(--primary); color:white; border:none; padding:8px; border-radius:10px; font-weight:bold; cursor:pointer;" onclick="changeCategory()">Start Learning!</button>
    </div>

    <div class="scene">
        <div class="card" id="flashcard" onclick="flipCard()">
            <div class="card-face front" id="faceFront">
                <div class="main-img" id="imgFront"></div>
                <div class="main-text" id="textFront"></div>
            </div>
            <div class="card-face back" id="faceBack">
                <div class="main-img" id="imgBack"></div>
                <div class="main-text" id="textBack"></div>
                <div id="examActions" class="exam-actions">
                    <button class="action-btn btn-no" onclick="event.stopPropagation(); markResult(false)">‚ùå</button>
                    <button class="action-btn btn-yes" onclick="event.stopPropagation(); markResult(true)">‚úÖ</button>
                </div>
            </div>
        </div>
    </div>

    <div class="nav-controls">
        <button class="nav-btn" id="prevBtn" onclick="prevCard()">‚¨ÖÔ∏è</button>
        <div class="counter" id="counterDisplay">0 / 0</div>
        <button class="nav-btn" id="nextBtn" onclick="nextCard()">‚û°Ô∏è</button>
    </div>
</div>

<script>
const vocab = [
 {en:"BOOKCASE", img:"bookcase.png", isImage: true, cat:"HOUSE_FURNITURE"},
 {en:"CHAIR", img:"ü™ë", cat:"HOUSE_FURNITURE"},
 {en:"CUPBOARD", img:"cupboard.png", isImage: true, cat:"HOUSE_FURNITURE"},
 {en:"DOOR", img:"üö™", cat:"HOUSE_FURNITURE"},
 {en:"PLANT", img:"ü™¥", cat:"HOUSE_FURNITURE"},
 {en:"RUG", img:"rug.png", isImage: true, cat:"HOUSE_FURNITURE"},
 {en:"TABLE", img:"table.png", isImage: true, cat:"HOUSE_FURNITURE"},
 {en:"WINDOW", img:"ü™ü", cat:"HOUSE_FURNITURE"},
 {en:"BIN", img:"üóëÔ∏è", cat:"HOUSE_FURNITURE"},
 {en:"SOFA", img:"üõãÔ∏è", cat:"HOUSE_FURNITURE"},
 {en:"GARDEN", img:"garden.png", isImage: true, cat:"HOUSE_ROOMS"},
 {en:"HALL", img:"hall.png", isImage: true, cat:"HOUSE_ROOMS"},
 {en:"KITCHEN", img:"kitchen.png", isImage: true, cat:"HOUSE_ROOMS"},
 {en:"BATHROOM", img:"bathroom.png", isImage: true, cat:"HOUSE_ROOMS"},
 {en:"BEDROOM", img:"bedroom.png", isImage: true, cat:"HOUSE_ROOMS"},
 {en:"LIVING ROOM", img:"living room.png", isImage: true, cat:"HOUSE_ROOMS"},
 {en:"GARAGE", img:"garage.png", isImage: true, cat:"HOUSE_ROOMS"},
 {en:"DANCE", img:"üíÉ", cat:"HOBBIES"},
 {en:"DO KARATE", img:"ü•ã", cat:"HOBBIES"},
 {en:"JUGGLE", img:"ü§π", cat:"HOBBIES"},
 {en:"MAKE MODELS", img:"‚úàÔ∏è", cat:"HOBBIES"},
 {en:"PAINT", img:"üé®", cat:"HOBBIES"},
 {en:"PLAY THE GUITAR", img:"üé∏", cat:"HOBBIES"},
 {en:"RIDE A BIKE", img:"üö¥", cat:"HOBBIES"},
 {en:"SING", img:"üé§", cat:"HOBBIES"},
 {en:"COAT", img:"üß•", cat:"CLOTHES"},
 {en:"DRESS", img:"üëó", cat:"CLOTHES"},
 {en:"HAT", img:"üé©", cat:"CLOTHES"},
 {en:"JEANS", img:"üëñ", cat:"CLOTHES"},
 {en:"JUMPER", img:"jumper.png", isImage: true, cat:"CLOTHES"},
 {en:"SHIRT", img:"üëî", cat:"CLOTHES"},
 {en:"SHOES", img:"üëû", cat:"CLOTHES"},
 {en:"SHORTS", img:"ü©≥", cat:"CLOTHES"},
 {en:"SKIRT", img:"skirt.png", isImage: true, cat:"CLOTHES"},
 {en:"T-SHIRT", img:"üëï", cat:"CLOTHES"},
 {en:"TROUSERS", img:"trousers.png", isImage: true, cat:"CLOTHES"},
 {en:"JACKET", img:"jacket.png", isImage: true, cat:"CLOTHES"},
 {en:"BOOTS", img:"üë¢", cat:"CLOTHES"},
 {en:"GLASSES", img:"üëì", cat:"CLOTHES"},
 {en:"SCARF", img:"üß£", cat:"CLOTHES"},
 {en:"SOCKS", img:"üß¶", cat:"CLOTHES"},
 {en:"BELT", img:"belt.png", isImage: true, cat:"SUPERHEROES"},
 {en:"CLOUDY", img:"‚òÅÔ∏è", cat:"WEATHER"},
 {en:"COLD", img:"‚ùÑÔ∏è", cat:"WEATHER"},
 {en:"HOT", img:"ü•µ", cat:"WEATHER"},
 {en:"RAINY", img:"üåßÔ∏è", cat:"WEATHER"},
 {en:"SNOWY", img:"üå®Ô∏è", cat:"WEATHER"},
 {en:"SUNNY", img:"‚òÄÔ∏è", cat:"WEATHER"},
 {en:"WINDY", img:"üå¨Ô∏è", cat:"WEATHER"},
 {en:"STORMY", img:"‚õàÔ∏è", cat:"WEATHER"},
 {en:"BAT", img:"ü¶á", cat:"ANIMALS"},
 {en:"BIRD", img:"üê¶", cat:"ANIMALS"},
 {en:"BUTTERFLY", img:"ü¶ã", cat:"ANIMALS"},
 {en:"DUCK", img:"ü¶Ü", cat:"ANIMALS"},
 {en:"FROG", img:"üê∏", cat:"ANIMALS"},
 {en:"HEDGEHOG", img:"ü¶î", cat:"ANIMALS"},
 {en:"SQUIRREL", img:"üêøÔ∏è", cat:"ANIMALS"},
 {en:"CLIMB", img:"üßó", cat:"ANIMAL ACTIONS"},
 {en:"FLY", img:"fly.png", isImage: true, cat:"ANIMAL ACTIONS"},
 {en:"JUMP", img:"jump.png", isImage: true, cat:"ANIMAL ACTIONS"},
 {en:"RUN", img:"üèÉ", cat:"ANIMAL ACTIONS"},
 {en:"SWIM", img:"üèä", cat:"ANIMAL ACTIONS"},
 {en:"WALK", img:"üö∂‚Äç‚ôÇÔ∏è", cat:"ANIMAL ACTIONS"},
 {en:"LIZARD", img:"ü¶é", cat:"ANIMALS"},
 {en:"SNAKE", img:"üêç", cat:"ANIMALS"},
 {en:"OWL", img:"ü¶â", cat:"ANIMALS"},
 {en:"SPIDER", img:"üï∑Ô∏è", cat:"ANIMALS"},
 {en:"FOX", img:"ü¶ä", cat:"ANIMALS"},
 {en:"BLUE", img:"üîµ", cat:"COLOURS"},
 {en:"PINK", img:"ü©∑", cat:"COLOURS"},
 {en:"PURPLE", img:"üíú", cat:"COLOURS"},
 {en:"YELLOW", img:"üíõ", cat:"COLOURS"},
 {en:"RED", img:"üî¥", cat:"COLOURS"},
 {en:"GREEN", img:"üü¢", cat:"COLOURS"},
 {en:"BLACK", img:"‚ö´", cat:"COLOURS"},
 {en:"WHITE", img:"‚ö™", cat:"COLOURS"},
 {en:"BROWN", img:"üü§", cat:"COLOURS"},
 {en:"GREY", img:"ü©∂", cat:"COLOURS"},
 {en:"ORANGE", img:"üü†", cat:"COLOURS"},
 {en:"ELEVEN", img:"1Ô∏è‚É£1Ô∏è‚É£", cat:"NUMBERS"},
 {en:"TWELVE", img:"1Ô∏è‚É£2Ô∏è‚É£", cat:"NUMBERS"},
 {en:"THIRTEEN", img:"1Ô∏è‚É£3Ô∏è‚É£", cat:"NUMBERS"},
 {en:"FOURTEEN", img:"1Ô∏è‚É£4Ô∏è‚É£", cat:"NUMBERS"},
 {en:"FIFTEEN", img:"1Ô∏è‚É£5Ô∏è‚É£", cat:"NUMBERS"},
 {en:"SIXTEEN", img:"1Ô∏è‚É£6Ô∏è‚É£", cat:"NUMBERS"},
 {en:"SEVENTEEN", img:"1Ô∏è‚É£7Ô∏è‚É£", cat:"NUMBERS"},
 {en:"EIGHTEEN", img:"1Ô∏è‚É£8Ô∏è‚É£", cat:"NUMBERS"},
 {en:"NINETEEN", img:"1Ô∏è‚É£9Ô∏è‚É£", cat:"NUMBERS"},
 {en:"TWENTY", img:"2Ô∏è‚É£0Ô∏è‚É£", cat:"NUMBERS"},
 {en:"ONE", img:"1Ô∏è‚É£", cat:"NUMBERS"},
 {en:"TWO", img:"2Ô∏è‚É£", cat:"NUMBERS"},
 {en:"THREE", img:"3Ô∏è‚É£", cat:"NUMBERS"},
 {en:"FOUR", img:"4Ô∏è‚É£", cat:"NUMBERS"},
 {en:"FIVE", img:"5Ô∏è‚É£", cat:"NUMBERS"},
 {en:"SIX", img:"6Ô∏è‚É£", cat:"NUMBERS"},
 {en:"SEVEN", img:"7Ô∏è‚É£", cat:"NUMBERS"},
 {en:"EIGHT", img:"8Ô∏è‚É£", cat:"NUMBERS"},
 {en:"NINE", img:"9Ô∏è‚É£", cat:"NUMBERS"},
 {en:"TEN", img:"üîü", cat:"NUMBERS"},
 {en:"CLEVER", img:"üß†", cat:"SUPERHEROES", emoji:"ü¶∏"},
 {en:"FAST", img:"‚ö°", cat:"SUPERHEROES", emoji:"ü¶∏"},
 {en:"INVISIBLE", img:"invisible.png", isImage: true, cat:"SUPERHEROES", emoji:"ü¶∏"},
 {en:"SCARY", img:"üëπ", cat:"SUPERHEROES", emoji:"ü¶∏"},
 {en:"SHORT", img:"short.png", isImage: true, cat:"SUPERHEROES", emoji:"ü¶∏"},
 {en:"STRONG", img:"üí™", cat:"SUPERHEROES", emoji:"ü¶∏"},
 {en:"TALL", img:"tall.png", isImage: true, cat:"SUPERHEROES", emoji:"ü¶∏"},
 {en:"THIN", img:"thin.png", isImage: true, cat:"SUPERHEROES", emoji:"ü¶∏"},
 {en:"CAPE", img:"cape.png", isImage: true, cat:"SUPERHEROES", emoji:"ü¶∏"},
 {en:"DRAWING", img:"draw.png", isImage: true, cat:"FREETIME"},
 {en:"DRINKING", img:"drink.png", isImage: true, cat:"FREETIME"},
 {en:"EATING", img:"eat.png", isImage: true, cat:"FREETIME"},
 {en:"LISTENING", img:"üéß", cat:"FREETIME"},
 {en:"READING", img:"read.png", isImage: true, cat:"FREETIME"},
 {en:"TAKING PHOTOS", img:"take photos.png", isImage: true, cat:"FREETIME"},
 {en:"TALKING", img:"üó£Ô∏è", cat:"FREETIME"},
 {en:"WRITING", img:"üìù", cat:"FREETIME"}
];

let currentList = [], currentIndex = 0, isFlipped = false, errorList = [];
let gameMode = 'IMG-EN', isExamMode = false;
let seconds = 0, timerInterval = null, correct = 0, wrong = 0, currentStreak = 0;

const ui = {
    card: document.getElementById("flashcard"),
    imgFront: document.getElementById("imgFront"),
    textFront: document.getElementById("textFront"),
    imgBack: document.getElementById("imgBack"),
    textBack: document.getElementById("textBack"),
    faceFront: document.getElementById("faceFront"),
    faceBack: document.getElementById("faceBack"),
    counter: document.getElementById("counterDisplay"),
    progressBar: document.getElementById("progressBar"),
    examBar: document.getElementById("examBar"),
    timer: document.getElementById("timer"),
    scoreCorrect: document.getElementById("scoreCorrect"),
    scoreWrong: document.getElementById("scoreWrong"),
    streak: document.getElementById("streak"),
    examActions: document.getElementById("examActions"),
    mixPanel: document.getElementById("mixPanel"),
    mixCheckboxes: document.getElementById("mixCheckboxes"),
    catSelect: document.getElementById("categorySelect")
};

const categoryOrder = [
    { name: "NUMBERS", emoji: "üî¢" }, { name: "COLOURS", emoji: "üîµ" },
    { name: "HOUSE_FURNITURE", emoji: "ü™ë" }, { name: "HOUSE_ROOMS", emoji: "üè°" },
    { name: "HOBBIES", emoji: "üé∏" }, { name: "CLOTHES", emoji: "üëï" },
    { name: "WEATHER", emoji: "‚òÄÔ∏è" }, { name: "ANIMALS", emoji: "ü¶ä" }, { name: "ANIMAL ACTIONS", emoji: "ü™Ω" },
    { name: "SUPERHEROES", emoji: "ü¶∏" }, { name: "FREETIME", emoji: "üì∑" }
];

let audioCtx = null;
function playBeep(freq, dur) {
    if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.type = "sine"; osc.frequency.value = freq;
    gain.gain.setValueAtTime(0.08, audioCtx.currentTime);
    osc.connect(gain); gain.connect(audioCtx.destination);
    osc.start();
    osc.stop(audioCtx.currentTime + dur);
}

function initCategories() {
    categoryOrder.forEach(cat => {
        const opt = document.createElement("option");
        opt.value = cat.name; opt.textContent = `${cat.emoji} ${cat.name}`;
        ui.catSelect.appendChild(opt);
        ui.mixCheckboxes.innerHTML += `<div style="margin:5px 0;"><input type="checkbox" value="${cat.name}" id="cb_${cat.name}"> <label for="cb_${cat.name}">${cat.emoji} ${cat.name}</label></div>`;
    });
}

function setMode(mode) {
    gameMode = mode;
    document.getElementById("btnImgEn").classList.toggle("active", mode === 'IMG-EN');
    document.getElementById("btnEnImg").classList.toggle("active", mode === 'EN-IMG');
    resetCardFace(); updateUI();
}

function toggleExamMode() {
    isExamMode = !isExamMode;
    document.getElementById("btnExam").classList.toggle("active", isExamMode);
    ui.examBar.style.display = isExamMode ? "flex" : "none";
    ui.examActions.style.display = isExamMode ? "flex" : "none";
    if(isExamMode) startExam(); else resetExam();
}

function startExam() {
    resetExam();
    timerInterval = setInterval(() => {
        seconds++;
        ui.timer.textContent = `${String(Math.floor(seconds/60)).padStart(2,'0')}:${String(seconds%60).padStart(2,'0')}`;
    }, 1000);
    changeCategory();
}

function resetExam() {
    clearInterval(timerInterval);
    seconds = 0; correct = 0; wrong = 0; currentStreak = 0;
    errorList = [];
    ui.scoreCorrect.textContent = "0"; ui.scoreWrong.textContent = "0"; ui.streak.textContent = "0";
}

function markResult(isCorrect) {
    if(isCorrect) { correct++; currentStreak++; playBeep(880, 0.1); }
    else { wrong++;
        currentStreak = 0; errorList.push(currentList[currentIndex]); playBeep(220, 0.3); }
    ui.scoreCorrect.textContent = correct; ui.scoreWrong.textContent = wrong; ui.streak.textContent = currentStreak;
    if(currentIndex === currentList.length - 1) finishExam(); else nextCard();
}

function finishExam() {
    clearInterval(timerInterval);
    if(errorList.length > 0 && confirm("Finish! Review mistakes?")) {
        currentList = [...errorList];
        currentIndex = 0; errorList = []; resetCardFace(); updateUI();
    } else toggleExamMode();
}

function handleCategoryChange() {
    ui.mixPanel.style.display = (ui.catSelect.value === "MIXED") ? "block" : "none";
    if(ui.catSelect.value !== "MIXED") changeCategory();
}

function changeCategory() {
    const val = ui.catSelect.value;
    let selectedCats = [];
    if(val === "ALL") selectedCats = categoryOrder.map(c => c.name);
    else if (val === "MIXED") {
        selectedCats = Array.from(ui.mixCheckboxes.querySelectorAll('input:checked')).map(cb => cb.value);
        if(!selectedCats.length) return alert("Pick at least one!");
        ui.mixPanel.style.display = "none";
    } else selectedCats = [val];
    currentList = vocab.filter(v => selectedCats.includes(v.cat)).sort(() => Math.random() - 0.5);
    currentIndex = 0; resetCardFace(); updateUI();
}

function updateUI() {
    if(!currentList.length) return;
    const item = currentList[currentIndex];
    ui.imgFront.innerHTML = ""; ui.textFront.textContent = "";
    ui.imgBack.innerHTML = "";
    ui.textBack.textContent = "";

    if(gameMode === 'IMG-EN') {
        ui.faceFront.className = 'card-face front face-img';
        renderContent(ui.imgFront, item);
        ui.faceBack.className = 'card-face back face-word';
        ui.textBack.textContent = item.en;
    } else {
        ui.faceFront.className = 'card-face front face-word';
        ui.textFront.textContent = item.en;
        ui.faceBack.className = 'card-face back face-img';
        renderContent(ui.imgBack, item);
    }
    ui.counter.textContent = `${currentIndex + 1} / ${currentList.length}`;
    ui.progressBar.style.width = `${((currentIndex + 1) / currentList.length) * 100}%`;
}

function renderContent(container, item) {
    if(item.isImage) container.innerHTML = `<img src="${item.img}">`;
    else container.textContent = item.img;
}

function flipCard() {
    isFlipped = !isFlipped;
    ui.card.classList.toggle("is-flipped", isFlipped);
    if(isFlipped) setTimeout(playCurrentAudio, 200);
}

function playCurrentAudio() {
    window.speechSynthesis.cancel();
    const msg = new SpeechSynthesisUtterance(currentList[currentIndex].en);
    msg.lang = "en-GB"; msg.rate = 0.9;
    window.speechSynthesis.speak(msg);
}

function resetCardFace() { isFlipped = false; ui.card.classList.remove("is-flipped"); }
function nextCard() { if(currentIndex < currentList.length - 1) { currentIndex++; resetCardFace(); setTimeout(updateUI, 150); } }
function prevCard() { if(currentIndex > 0) { currentIndex--; resetCardFace(); setTimeout(updateUI, 150); } }

initCategories();
changeCategory();
</script>
</body>
</html>